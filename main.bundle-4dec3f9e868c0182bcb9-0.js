!function(r){var e={};function i(t){if(e[t])return e[t].exports;var n=e[t]={i:t,l:!1,exports:{}};return r[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=r,i.c=e,i.d=function(t,n,r){i.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(n,t){if(1&t&&(n=i(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var e in n)i.d(r,e,function(t){return n[t]}.bind(null,e));return r},i.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(n,"a",n),n},i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},i.p="",i(i.s=8)}([function(t,n){t.exports="#version 300 es\n\nlayout(location = 0) in vec3 position;\nlayout(location = 1) in vec4 color;\nlayout(location = 2) in vec3 normal;\n\nout vec4 v_Color;\nout vec3 v_Normal;\nout vec3 v_FragPos;\n\nuniform mat4 u_Model;\nuniform mat4 u_View;\nuniform mat4 u_Projection;\n\nvoid main() {\n    mat4 u_MVP = u_Projection * u_View * u_Model;\n    gl_Position = u_MVP * vec4(position, 1.0);\n\n    v_Color = color;\n\n    // non-uniform scaling\n    v_Normal = mat3(transpose(inverse(u_Model))) * normal;\n\n    v_FragPos = (u_Model * vec4(position, 1.0)).xyz;\n}\n"},function(t,n){t.exports="#version 300 es\n\nprecision highp float;\n\nlayout(location = 0) out vec4 color;\n\nuniform vec4 u_Color;\n\nin vec4 v_Color;\nin vec3 v_Normal;\nin vec3 v_FragPos;\n\nstruct DirectionalLight {\n    vec3 color;\n    float ambientIntensity;\n    vec3 direction;\n    float diffuseIntensity;\n};\n\nstruct Material {\n    float specularIntensity;\n    float shininess;\n};\n\nuniform DirectionalLight u_DirectionalLight;\nuniform Material u_Material;\nuniform vec3 u_EyePosition;\n\nvoid main() {\n    vec4 ambientColor = u_DirectionalLight.ambientIntensity * vec4(u_DirectionalLight.color, 1.0f);\n\n    float diffuseFactor = max(dot(normalize(v_Normal), normalize(u_DirectionalLight.direction)), 0.0f);\n    vec4 diffuseColor =  vec4(u_DirectionalLight.color, 1.0f) * u_DirectionalLight.diffuseIntensity * diffuseFactor;\n\n    vec4 specularColor = vec4(0.0f, 0.0f, 0.0f, 0.0f);\n    if (diffuseFactor > 0.0f) {\n        vec3 fragToEye = normalize(u_EyePosition - v_FragPos);\n        vec3 reflectedVertex = normalize(reflect(u_DirectionalLight.direction, normalize(v_Normal)));\n\n        float specularFactor = dot(fragToEye, reflectedVertex);\n        if (specularFactor > 0.0f) {\n            specularFactor = pow(specularFactor, u_Material.shininess);\n            specularColor = vec4(u_DirectionalLight.color * u_Material.specularIntensity * specularFactor, 1.0f);\n        }\n    }\n\n    color = v_Color * (ambientColor + diffuseColor + specularColor);\n}\n"},,,,,,,function(t,n,r){t.exports=r(12)},function(t,n,r){var e=r(10),i=r(11);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);var a={insert:"head",singleton:!1},o=(e(t.i,i,a),i.locals?i.locals:{});t.exports=o},function(t,n,a){"use strict";var r,e,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=(e={},function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}),u={};function s(t,n,r){for(var e=0;e<n.length;e++){var i={css:n[e][1],media:n[e][2],sourceMap:n[e][3]};u[t][e]?u[t][e](i):u[t].push(m(i,r))}}function c(t){var n=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var e=a.nc;e&&(r.nonce=e)}if(Object.keys(r).forEach(function(t){n.setAttribute(t,r[t])}),"function"==typeof t.insert)t.insert(n);else{var i=o(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}return n}var f,h=(f=[],function(t,n){return f[t]=n,f.filter(Boolean).join("\n")});function l(t,n,r,e){var i=r?"":e.css;if(t.styleSheet)t.styleSheet.cssText=h(n,i);else{var a=document.createTextNode(i),o=t.childNodes;o[n]&&t.removeChild(o[n]),o.length?t.insertBefore(a,o[n]):t.appendChild(a)}}var d=null,v=0;function m(n,t){var r,e,i;if(t.singleton){var a=v++;r=d=d||c(t),e=l.bind(null,r,a,!1),i=l.bind(null,r,a,!0)}else r=c(t),e=function(t,n,r){var e=r.css,i=r.media,a=r.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),a&&btoa&&(e+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}.bind(null,r,t),i=function(){var t;null!==(t=r).parentNode&&t.parentNode.removeChild(t)};return e(n),function(t){if(t){if(t.css===n.css&&t.media===n.media&&t.sourceMap===n.sourceMap)return;e(n=t)}else i()}}t.exports=function(r,t,e){return(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=i()),r=e.base?r+e.base:r,t=t||[],u[r]||(u[r]=[]),s(r,t,e),function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){u[r]||(u[r]=[]),s(r,t,e);for(var n=t.length;n<u[r].length;n++)u[r][n]();u[r].length=t.length,0===u[r].length&&delete u[r]}}}},function(t,n,r){},function(t,n,r){"use strict";r.r(n);var i={};r.r(i),r.d(i,"create",function(){return e}),r.d(i,"clone",function(){return l}),r.d(i,"copy",function(){return d}),r.d(i,"fromValues",function(){return v}),r.d(i,"set",function(){return m}),r.d(i,"identity",function(){return x}),r.d(i,"transpose",function(){return y}),r.d(i,"invert",function(){return M}),r.d(i,"adjoint",function(){return b}),r.d(i,"determinant",function(){return w}),r.d(i,"multiply",function(){return _}),r.d(i,"translate",function(){return k}),r.d(i,"scale",function(){return S}),r.d(i,"rotate",function(){return E}),r.d(i,"rotateX",function(){return T}),r.d(i,"rotateY",function(){return A}),r.d(i,"rotateZ",function(){return P}),r.d(i,"fromTranslation",function(){return C}),r.d(i,"fromScaling",function(){return F}),r.d(i,"fromRotation",function(){return L}),r.d(i,"fromXRotation",function(){return O}),r.d(i,"fromYRotation",function(){return B}),r.d(i,"fromZRotation",function(){return D}),r.d(i,"fromRotationTranslation",function(){return j}),r.d(i,"fromQuat2",function(){return z}),r.d(i,"getTranslation",function(){return R}),r.d(i,"getScaling",function(){return U}),r.d(i,"getRotation",function(){return V}),r.d(i,"fromRotationTranslationScale",function(){return N}),r.d(i,"fromRotationTranslationScaleOrigin",function(){return q}),r.d(i,"fromQuat",function(){return Y}),r.d(i,"frustum",function(){return G}),r.d(i,"perspective",function(){return X}),r.d(i,"perspectiveFromFieldOfView",function(){return H}),r.d(i,"ortho",function(){return K}),r.d(i,"lookAt",function(){return Q}),r.d(i,"targetTo",function(){return W}),r.d(i,"str",function(){return Z}),r.d(i,"frob",function(){return J}),r.d(i,"add",function(){return $}),r.d(i,"subtract",function(){return tt}),r.d(i,"multiplyScalar",function(){return nt}),r.d(i,"multiplyScalarAndAdd",function(){return rt}),r.d(i,"exactEquals",function(){return et}),r.d(i,"equals",function(){return it}),r.d(i,"mul",function(){return at}),r.d(i,"sub",function(){return ot});var p={};r.r(p),r.d(p,"create",function(){return ut}),r.d(p,"clone",function(){return st}),r.d(p,"length",function(){return ct}),r.d(p,"fromValues",function(){return ft}),r.d(p,"copy",function(){return ht}),r.d(p,"set",function(){return lt}),r.d(p,"add",function(){return dt}),r.d(p,"subtract",function(){return vt}),r.d(p,"multiply",function(){return mt}),r.d(p,"divide",function(){return yt}),r.d(p,"ceil",function(){return gt}),r.d(p,"floor",function(){return pt}),r.d(p,"min",function(){return Mt}),r.d(p,"max",function(){return bt}),r.d(p,"round",function(){return wt}),r.d(p,"scale",function(){return _t}),r.d(p,"scaleAndAdd",function(){return xt}),r.d(p,"distance",function(){return kt}),r.d(p,"squaredDistance",function(){return St}),r.d(p,"squaredLength",function(){return Et}),r.d(p,"negate",function(){return Tt}),r.d(p,"inverse",function(){return At}),r.d(p,"normalize",function(){return Pt}),r.d(p,"dot",function(){return Ct}),r.d(p,"cross",function(){return Ft}),r.d(p,"lerp",function(){return Lt}),r.d(p,"hermite",function(){return Ot}),r.d(p,"bezier",function(){return It}),r.d(p,"random",function(){return Bt}),r.d(p,"transformMat4",function(){return Dt}),r.d(p,"transformMat3",function(){return jt}),r.d(p,"transformQuat",function(){return zt}),r.d(p,"rotateX",function(){return Rt}),r.d(p,"rotateY",function(){return Ut}),r.d(p,"rotateZ",function(){return Vt}),r.d(p,"angle",function(){return Nt}),r.d(p,"zero",function(){return qt}),r.d(p,"str",function(){return Yt}),r.d(p,"exactEquals",function(){return Gt}),r.d(p,"equals",function(){return Xt}),r.d(p,"sub",function(){return Kt}),r.d(p,"mul",function(){return Qt}),r.d(p,"div",function(){return Wt}),r.d(p,"dist",function(){return Zt}),r.d(p,"sqrDist",function(){return Jt}),r.d(p,"len",function(){return $t}),r.d(p,"sqrLen",function(){return tn}),r.d(p,"forEach",function(){return nn});var a={};r.r(a),r.d(a,"create",function(){return rn}),r.d(a,"clone",function(){return en}),r.d(a,"fromValues",function(){return an}),r.d(a,"copy",function(){return on}),r.d(a,"set",function(){return un}),r.d(a,"add",function(){return sn}),r.d(a,"subtract",function(){return cn}),r.d(a,"multiply",function(){return fn}),r.d(a,"divide",function(){return hn}),r.d(a,"ceil",function(){return ln}),r.d(a,"floor",function(){return dn}),r.d(a,"min",function(){return vn}),r.d(a,"max",function(){return mn}),r.d(a,"round",function(){return yn}),r.d(a,"scale",function(){return gn}),r.d(a,"scaleAndAdd",function(){return pn}),r.d(a,"distance",function(){return Mn}),r.d(a,"squaredDistance",function(){return bn}),r.d(a,"length",function(){return wn}),r.d(a,"squaredLength",function(){return _n}),r.d(a,"negate",function(){return xn}),r.d(a,"inverse",function(){return kn}),r.d(a,"normalize",function(){return Sn}),r.d(a,"dot",function(){return En}),r.d(a,"cross",function(){return Tn}),r.d(a,"lerp",function(){return An}),r.d(a,"random",function(){return Pn}),r.d(a,"transformMat4",function(){return Cn}),r.d(a,"transformQuat",function(){return Fn}),r.d(a,"zero",function(){return Ln}),r.d(a,"str",function(){return On}),r.d(a,"exactEquals",function(){return In}),r.d(a,"equals",function(){return Bn}),r.d(a,"sub",function(){return jn}),r.d(a,"mul",function(){return zn}),r.d(a,"div",function(){return Rn}),r.d(a,"dist",function(){return Un}),r.d(a,"sqrDist",function(){return Vn}),r.d(a,"len",function(){return Nn}),r.d(a,"sqrLen",function(){return qn}),r.d(a,"forEach",function(){return Yn});r(9);function o(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var u=function(){function e(t,n,r){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this._coordinates=t,this._color=n,this._normal=r}var t,n,r;return t=e,(n=[{key:"coordinates",set:function(t){this._coordinates=t},get:function(){return this._coordinates}},{key:"color",set:function(t){this._color=t},get:function(){return this._color}},{key:"normal",set:function(t){this._normal=t},get:function(){return this._normal}}])&&o(t.prototype,n),r&&o(t,r),e}();function s(t){return function(t){if(Array.isArray(t)){for(var n=0,r=new Array(t.length);n<t.length;n++)r[n]=t[n];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var f=function(){function r(t,n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,r),this.vertices=t,this.indices=n}var t,n,e;return t=r,(n=[{key:"vertexData",get:function(){var t=[],n=!0,r=!1,e=void 0;try{for(var i,a=this.vertices[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var o=i.value;t.push.apply(t,s(o.coordinates)),t.push.apply(t,s(o.color)),t.push.apply(t,s(o.normal))}}catch(t){r=!0,e=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw e}}return t}},{key:"indexData",get:function(){return this.indices}}])&&c(t.prototype,n),e&&c(t,e),r}(),I=1e-6,g="undefined"!=typeof Float32Array?Float32Array:Array,h=Math.random;Math.PI;function e(){var t=new g(16);return g!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function l(t){var n=new g(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function d(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function v(t,n,r,e,i,a,o,u,s,c,f,h,l,d,v,m){var y=new g(16);return y[0]=t,y[1]=n,y[2]=r,y[3]=e,y[4]=i,y[5]=a,y[6]=o,y[7]=u,y[8]=s,y[9]=c,y[10]=f,y[11]=h,y[12]=l,y[13]=d,y[14]=v,y[15]=m,y}function m(t,n,r,e,i,a,o,u,s,c,f,h,l,d,v,m,y){return t[0]=n,t[1]=r,t[2]=e,t[3]=i,t[4]=a,t[5]=o,t[6]=u,t[7]=s,t[8]=c,t[9]=f,t[10]=h,t[11]=l,t[12]=d,t[13]=v,t[14]=m,t[15]=y,t}function x(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function y(t,n){if(t===n){var r=n[1],e=n[2],i=n[3],a=n[6],o=n[7],u=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=r,t[6]=n[9],t[7]=n[13],t[8]=e,t[9]=a,t[11]=n[14],t[12]=i,t[13]=o,t[14]=u}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}function M(t,n){var r=n[0],e=n[1],i=n[2],a=n[3],o=n[4],u=n[5],s=n[6],c=n[7],f=n[8],h=n[9],l=n[10],d=n[11],v=n[12],m=n[13],y=n[14],g=n[15],p=r*u-e*o,M=r*s-i*o,b=r*c-a*o,w=e*s-i*u,_=e*c-a*u,x=i*c-a*s,k=f*m-h*v,S=f*y-l*v,E=f*g-d*v,T=h*y-l*m,A=h*g-d*m,P=l*g-d*y,C=p*P-M*A+b*T+w*E-_*S+x*k;return C?(C=1/C,t[0]=(u*P-s*A+c*T)*C,t[1]=(i*A-e*P-a*T)*C,t[2]=(m*x-y*_+g*w)*C,t[3]=(l*_-h*x-d*w)*C,t[4]=(s*E-o*P-c*S)*C,t[5]=(r*P-i*E+a*S)*C,t[6]=(y*b-v*x-g*M)*C,t[7]=(f*x-l*b+d*M)*C,t[8]=(o*A-u*E+c*k)*C,t[9]=(e*E-r*A-a*k)*C,t[10]=(v*_-m*b+g*p)*C,t[11]=(h*b-f*_-d*p)*C,t[12]=(u*S-o*T-s*k)*C,t[13]=(r*T-e*S+i*k)*C,t[14]=(m*M-v*w-y*p)*C,t[15]=(f*w-h*M+l*p)*C,t):null}function b(t,n){var r=n[0],e=n[1],i=n[2],a=n[3],o=n[4],u=n[5],s=n[6],c=n[7],f=n[8],h=n[9],l=n[10],d=n[11],v=n[12],m=n[13],y=n[14],g=n[15];return t[0]=u*(l*g-d*y)-h*(s*g-c*y)+m*(s*d-c*l),t[1]=-(e*(l*g-d*y)-h*(i*g-a*y)+m*(i*d-a*l)),t[2]=e*(s*g-c*y)-u*(i*g-a*y)+m*(i*c-a*s),t[3]=-(e*(s*d-c*l)-u*(i*d-a*l)+h*(i*c-a*s)),t[4]=-(o*(l*g-d*y)-f*(s*g-c*y)+v*(s*d-c*l)),t[5]=r*(l*g-d*y)-f*(i*g-a*y)+v*(i*d-a*l),t[6]=-(r*(s*g-c*y)-o*(i*g-a*y)+v*(i*c-a*s)),t[7]=r*(s*d-c*l)-o*(i*d-a*l)+f*(i*c-a*s),t[8]=o*(h*g-d*m)-f*(u*g-c*m)+v*(u*d-c*h),t[9]=-(r*(h*g-d*m)-f*(e*g-a*m)+v*(e*d-a*h)),t[10]=r*(u*g-c*m)-o*(e*g-a*m)+v*(e*c-a*u),t[11]=-(r*(u*d-c*h)-o*(e*d-a*h)+f*(e*c-a*u)),t[12]=-(o*(h*y-l*m)-f*(u*y-s*m)+v*(u*l-s*h)),t[13]=r*(h*y-l*m)-f*(e*y-i*m)+v*(e*l-i*h),t[14]=-(r*(u*y-s*m)-o*(e*y-i*m)+v*(e*s-i*u)),t[15]=r*(u*l-s*h)-o*(e*l-i*h)+f*(e*s-i*u),t}function w(t){var n=t[0],r=t[1],e=t[2],i=t[3],a=t[4],o=t[5],u=t[6],s=t[7],c=t[8],f=t[9],h=t[10],l=t[11],d=t[12],v=t[13],m=t[14],y=t[15];return(n*o-r*a)*(h*y-l*m)-(n*u-e*a)*(f*y-l*v)+(n*s-i*a)*(f*m-h*v)+(r*u-e*o)*(c*y-l*d)-(r*s-i*o)*(c*m-h*d)+(e*s-i*u)*(c*v-f*d)}function _(t,n,r){var e=n[0],i=n[1],a=n[2],o=n[3],u=n[4],s=n[5],c=n[6],f=n[7],h=n[8],l=n[9],d=n[10],v=n[11],m=n[12],y=n[13],g=n[14],p=n[15],M=r[0],b=r[1],w=r[2],_=r[3];return t[0]=M*e+b*u+w*h+_*m,t[1]=M*i+b*s+w*l+_*y,t[2]=M*a+b*c+w*d+_*g,t[3]=M*o+b*f+w*v+_*p,M=r[4],b=r[5],w=r[6],_=r[7],t[4]=M*e+b*u+w*h+_*m,t[5]=M*i+b*s+w*l+_*y,t[6]=M*a+b*c+w*d+_*g,t[7]=M*o+b*f+w*v+_*p,M=r[8],b=r[9],w=r[10],_=r[11],t[8]=M*e+b*u+w*h+_*m,t[9]=M*i+b*s+w*l+_*y,t[10]=M*a+b*c+w*d+_*g,t[11]=M*o+b*f+w*v+_*p,M=r[12],b=r[13],w=r[14],_=r[15],t[12]=M*e+b*u+w*h+_*m,t[13]=M*i+b*s+w*l+_*y,t[14]=M*a+b*c+w*d+_*g,t[15]=M*o+b*f+w*v+_*p,t}function k(t,n,r){var e,i,a,o,u,s,c,f,h,l,d,v,m=r[0],y=r[1],g=r[2];return n===t?(t[12]=n[0]*m+n[4]*y+n[8]*g+n[12],t[13]=n[1]*m+n[5]*y+n[9]*g+n[13],t[14]=n[2]*m+n[6]*y+n[10]*g+n[14],t[15]=n[3]*m+n[7]*y+n[11]*g+n[15]):(e=n[0],i=n[1],a=n[2],o=n[3],u=n[4],s=n[5],c=n[6],f=n[7],h=n[8],l=n[9],d=n[10],v=n[11],t[0]=e,t[1]=i,t[2]=a,t[3]=o,t[4]=u,t[5]=s,t[6]=c,t[7]=f,t[8]=h,t[9]=l,t[10]=d,t[11]=v,t[12]=e*m+u*y+h*g+n[12],t[13]=i*m+s*y+l*g+n[13],t[14]=a*m+c*y+d*g+n[14],t[15]=o*m+f*y+v*g+n[15]),t}function S(t,n,r){var e=r[0],i=r[1],a=r[2];return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=n[7]*i,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=n[11]*a,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function E(t,n,r,e){var i,a,o,u,s,c,f,h,l,d,v,m,y,g,p,M,b,w,_,x,k,S,E,T,A=e[0],P=e[1],C=e[2],F=Math.hypot(A,P,C);return F<I?null:(A*=F=1/F,P*=F,C*=F,i=Math.sin(r),o=1-(a=Math.cos(r)),u=n[0],s=n[1],c=n[2],f=n[3],h=n[4],l=n[5],d=n[6],v=n[7],m=n[8],y=n[9],g=n[10],p=n[11],M=A*A*o+a,b=P*A*o+C*i,w=C*A*o-P*i,_=A*P*o-C*i,x=P*P*o+a,k=C*P*o+A*i,S=A*C*o+P*i,E=P*C*o-A*i,T=C*C*o+a,t[0]=u*M+h*b+m*w,t[1]=s*M+l*b+y*w,t[2]=c*M+d*b+g*w,t[3]=f*M+v*b+p*w,t[4]=u*_+h*x+m*k,t[5]=s*_+l*x+y*k,t[6]=c*_+d*x+g*k,t[7]=f*_+v*x+p*k,t[8]=u*S+h*E+m*T,t[9]=s*S+l*E+y*T,t[10]=c*S+d*E+g*T,t[11]=f*S+v*E+p*T,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)}function T(t,n,r){var e=Math.sin(r),i=Math.cos(r),a=n[4],o=n[5],u=n[6],s=n[7],c=n[8],f=n[9],h=n[10],l=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=a*i+c*e,t[5]=o*i+f*e,t[6]=u*i+h*e,t[7]=s*i+l*e,t[8]=c*i-a*e,t[9]=f*i-o*e,t[10]=h*i-u*e,t[11]=l*i-s*e,t}function A(t,n,r){var e=Math.sin(r),i=Math.cos(r),a=n[0],o=n[1],u=n[2],s=n[3],c=n[8],f=n[9],h=n[10],l=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=a*i-c*e,t[1]=o*i-f*e,t[2]=u*i-h*e,t[3]=s*i-l*e,t[8]=a*e+c*i,t[9]=o*e+f*i,t[10]=u*e+h*i,t[11]=s*e+l*i,t}function P(t,n,r){var e=Math.sin(r),i=Math.cos(r),a=n[0],o=n[1],u=n[2],s=n[3],c=n[4],f=n[5],h=n[6],l=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=a*i+c*e,t[1]=o*i+f*e,t[2]=u*i+h*e,t[3]=s*i+l*e,t[4]=c*i-a*e,t[5]=f*i-o*e,t[6]=h*i-u*e,t[7]=l*i-s*e,t}function C(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function F(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L(t,n,r){var e,i,a,o=r[0],u=r[1],s=r[2],c=Math.hypot(o,u,s);return c<I?null:(o*=c=1/c,u*=c,s*=c,e=Math.sin(n),a=1-(i=Math.cos(n)),t[0]=o*o*a+i,t[1]=u*o*a+s*e,t[2]=s*o*a-u*e,t[3]=0,t[4]=o*u*a-s*e,t[5]=u*u*a+i,t[6]=s*u*a+o*e,t[7]=0,t[8]=o*s*a+u*e,t[9]=u*s*a-o*e,t[10]=s*s*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function O(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function B(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function D(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function j(t,n,r){var e=n[0],i=n[1],a=n[2],o=n[3],u=e+e,s=i+i,c=a+a,f=e*u,h=e*s,l=e*c,d=i*s,v=i*c,m=a*c,y=o*u,g=o*s,p=o*c;return t[0]=1-(d+m),t[1]=h+p,t[2]=l-g,t[3]=0,t[4]=h-p,t[5]=1-(f+m),t[6]=v+y,t[7]=0,t[8]=l+g,t[9]=v-y,t[10]=1-(f+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function z(t,n){var r=new g(3),e=-n[0],i=-n[1],a=-n[2],o=n[3],u=n[4],s=n[5],c=n[6],f=n[7],h=e*e+i*i+a*a+o*o;return 0<h?(r[0]=2*(u*o+f*e+s*a-c*i)/h,r[1]=2*(s*o+f*i+c*e-u*a)/h,r[2]=2*(c*o+f*a+u*i-s*e)/h):(r[0]=2*(u*o+f*e+s*a-c*i),r[1]=2*(s*o+f*i+c*e-u*a),r[2]=2*(c*o+f*a+u*i-s*e)),j(t,n,r),t}function R(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function U(t,n){var r=n[0],e=n[1],i=n[2],a=n[4],o=n[5],u=n[6],s=n[8],c=n[9],f=n[10];return t[0]=Math.hypot(r,e,i),t[1]=Math.hypot(a,o,u),t[2]=Math.hypot(s,c,f),t}function V(t,n){var r=new g(3);U(r,n);var e=1/r[0],i=1/r[1],a=1/r[2],o=n[0]*e,u=n[1]*i,s=n[2]*a,c=n[4]*e,f=n[5]*i,h=n[6]*a,l=n[8]*e,d=n[9]*i,v=n[10]*a,m=o+f+v,y=0;return 0<m?(y=2*Math.sqrt(1+m),t[3]=.25*y,t[0]=(h-d)/y,t[1]=(l-s)/y,t[2]=(u-c)/y):f<o&&v<o?(y=2*Math.sqrt(1+o-f-v),t[3]=(h-d)/y,t[0]=.25*y,t[1]=(u+c)/y,t[2]=(l+s)/y):v<f?(y=2*Math.sqrt(1+f-o-v),t[3]=(l-s)/y,t[0]=(u+c)/y,t[1]=.25*y,t[2]=(h+d)/y):(y=2*Math.sqrt(1+v-o-f),t[3]=(u-c)/y,t[0]=(l+s)/y,t[1]=(h+d)/y,t[2]=.25*y),t}function N(t,n,r,e){var i=n[0],a=n[1],o=n[2],u=n[3],s=i+i,c=a+a,f=o+o,h=i*s,l=i*c,d=i*f,v=a*c,m=a*f,y=o*f,g=u*s,p=u*c,M=u*f,b=e[0],w=e[1],_=e[2];return t[0]=(1-(v+y))*b,t[1]=(l+M)*b,t[2]=(d-p)*b,t[3]=0,t[4]=(l-M)*w,t[5]=(1-(h+y))*w,t[6]=(m+g)*w,t[7]=0,t[8]=(d+p)*_,t[9]=(m-g)*_,t[10]=(1-(h+v))*_,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function q(t,n,r,e,i){var a=n[0],o=n[1],u=n[2],s=n[3],c=a+a,f=o+o,h=u+u,l=a*c,d=a*f,v=a*h,m=o*f,y=o*h,g=u*h,p=s*c,M=s*f,b=s*h,w=e[0],_=e[1],x=e[2],k=i[0],S=i[1],E=i[2],T=(1-(m+g))*w,A=(d+b)*w,P=(v-M)*w,C=(d-b)*_,F=(1-(l+g))*_,L=(y+p)*_,O=(v+M)*x,I=(y-p)*x,B=(1-(l+m))*x;return t[0]=T,t[1]=A,t[2]=P,t[3]=0,t[4]=C,t[5]=F,t[6]=L,t[7]=0,t[8]=O,t[9]=I,t[10]=B,t[11]=0,t[12]=r[0]+k-(T*k+C*S+O*E),t[13]=r[1]+S-(A*k+F*S+I*E),t[14]=r[2]+E-(P*k+L*S+B*E),t[15]=1,t}function Y(t,n){var r=n[0],e=n[1],i=n[2],a=n[3],o=r+r,u=e+e,s=i+i,c=r*o,f=e*o,h=e*u,l=i*o,d=i*u,v=i*s,m=a*o,y=a*u,g=a*s;return t[0]=1-h-v,t[1]=f+g,t[2]=l-y,t[3]=0,t[4]=f-g,t[5]=1-c-v,t[6]=d+m,t[7]=0,t[8]=l+y,t[9]=d-m,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function G(t,n,r,e,i,a,o){var u=1/(r-n),s=1/(i-e),c=1/(a-o);return t[0]=2*a*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*s,t[6]=0,t[7]=0,t[8]=(r+n)*u,t[9]=(i+e)*s,t[10]=(o+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*c,t[15]=0,t}function X(t,n,r,e,i){var a,o=1/Math.tan(n/2);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(e-i),t[10]=(i+e)*a,t[14]=2*i*e*a):(t[10]=-1,t[14]=-2*e),t}function H(t,n,r,e){var i=Math.tan(n.upDegrees*Math.PI/180),a=Math.tan(n.downDegrees*Math.PI/180),o=Math.tan(n.leftDegrees*Math.PI/180),u=Math.tan(n.rightDegrees*Math.PI/180),s=2/(o+u),c=2/(i+a);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-u)*s*.5,t[9]=(i-a)*c*.5,t[10]=e/(r-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*r/(r-e),t[15]=0,t}function K(t,n,r,e,i,a,o){var u=1/(n-r),s=1/(e-i),c=1/(a-o);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(n+r)*u,t[13]=(i+e)*s,t[14]=(o+a)*c,t[15]=1,t}function Q(t,n,r,e){var i,a,o,u,s,c,f,h,l,d,v=n[0],m=n[1],y=n[2],g=e[0],p=e[1],M=e[2],b=r[0],w=r[1],_=r[2];return Math.abs(v-b)<I&&Math.abs(m-w)<I&&Math.abs(y-_)<I?x(t):(f=v-b,h=m-w,l=y-_,i=p*(l*=d=1/Math.hypot(f,h,l))-M*(h*=d),a=M*(f*=d)-g*l,o=g*h-p*f,(d=Math.hypot(i,a,o))?(i*=d=1/d,a*=d,o*=d):o=a=i=0,u=h*o-l*a,s=l*i-f*o,c=f*a-h*i,(d=Math.hypot(u,s,c))?(u*=d=1/d,s*=d,c*=d):c=s=u=0,t[0]=i,t[1]=u,t[2]=f,t[3]=0,t[4]=a,t[5]=s,t[6]=h,t[7]=0,t[8]=o,t[9]=c,t[10]=l,t[11]=0,t[12]=-(i*v+a*m+o*y),t[13]=-(u*v+s*m+c*y),t[14]=-(f*v+h*m+l*y),t[15]=1,t)}function W(t,n,r,e){var i=n[0],a=n[1],o=n[2],u=e[0],s=e[1],c=e[2],f=i-r[0],h=a-r[1],l=o-r[2],d=f*f+h*h+l*l;0<d&&(f*=d=1/Math.sqrt(d),h*=d,l*=d);var v=s*l-c*h,m=c*f-u*l,y=u*h-s*f;return 0<(d=v*v+m*m+y*y)&&(v*=d=1/Math.sqrt(d),m*=d,y*=d),t[0]=v,t[1]=m,t[2]=y,t[3]=0,t[4]=h*y-l*m,t[5]=l*v-f*y,t[6]=f*m-h*v,t[7]=0,t[8]=f,t[9]=h,t[10]=l,t[11]=0,t[12]=i,t[13]=a,t[14]=o,t[15]=1,t}function Z(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function J(t){return Math.hypot(t[0],t[1],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function $(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t[8]=n[8]+r[8],t[9]=n[9]+r[9],t[10]=n[10]+r[10],t[11]=n[11]+r[11],t[12]=n[12]+r[12],t[13]=n[13]+r[13],t[14]=n[14]+r[14],t[15]=n[15]+r[15],t}function tt(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t[6]=n[6]-r[6],t[7]=n[7]-r[7],t[8]=n[8]-r[8],t[9]=n[9]-r[9],t[10]=n[10]-r[10],t[11]=n[11]-r[11],t[12]=n[12]-r[12],t[13]=n[13]-r[13],t[14]=n[14]-r[14],t[15]=n[15]-r[15],t}function nt(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*r,t[9]=n[9]*r,t[10]=n[10]*r,t[11]=n[11]*r,t[12]=n[12]*r,t[13]=n[13]*r,t[14]=n[14]*r,t[15]=n[15]*r,t}function rt(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t[6]=n[6]+r[6]*e,t[7]=n[7]+r[7]*e,t[8]=n[8]+r[8]*e,t[9]=n[9]+r[9]*e,t[10]=n[10]+r[10]*e,t[11]=n[11]+r[11]*e,t[12]=n[12]+r[12]*e,t[13]=n[13]+r[13]*e,t[14]=n[14]+r[14]*e,t[15]=n[15]+r[15]*e,t}function et(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]}function it(t,n){var r=t[0],e=t[1],i=t[2],a=t[3],o=t[4],u=t[5],s=t[6],c=t[7],f=t[8],h=t[9],l=t[10],d=t[11],v=t[12],m=t[13],y=t[14],g=t[15],p=n[0],M=n[1],b=n[2],w=n[3],_=n[4],x=n[5],k=n[6],S=n[7],E=n[8],T=n[9],A=n[10],P=n[11],C=n[12],F=n[13],L=n[14],O=n[15];return Math.abs(r-p)<=I*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(e-M)<=I*Math.max(1,Math.abs(e),Math.abs(M))&&Math.abs(i-b)<=I*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(a-w)<=I*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(o-_)<=I*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(u-x)<=I*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(s-k)<=I*Math.max(1,Math.abs(s),Math.abs(k))&&Math.abs(c-S)<=I*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(f-E)<=I*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(h-T)<=I*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(l-A)<=I*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(d-P)<=I*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(v-C)<=I*Math.max(1,Math.abs(v),Math.abs(C))&&Math.abs(m-F)<=I*Math.max(1,Math.abs(m),Math.abs(F))&&Math.abs(y-L)<=I*Math.max(1,Math.abs(y),Math.abs(L))&&Math.abs(g-O)<=I*Math.max(1,Math.abs(g),Math.abs(O))}Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)});var at=_,ot=tt;function ut(){var t=new g(3);return g!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function st(t){var n=new g(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function ct(t){var n=t[0],r=t[1],e=t[2];return Math.hypot(n,r,e)}function ft(t,n,r){var e=new g(3);return e[0]=t,e[1]=n,e[2]=r,e}function ht(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function lt(t,n,r,e){return t[0]=n,t[1]=r,t[2]=e,t}function dt(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t}function vt(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t}function mt(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t}function yt(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t}function gt(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t}function pt(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t}function Mt(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t}function bt(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t}function wt(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t}function _t(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t}function xt(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t}function kt(t,n){var r=n[0]-t[0],e=n[1]-t[1],i=n[2]-t[2];return Math.hypot(r,e,i)}function St(t,n){var r=n[0]-t[0],e=n[1]-t[1],i=n[2]-t[2];return r*r+e*e+i*i}function Et(t){var n=t[0],r=t[1],e=t[2];return n*n+r*r+e*e}function Tt(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function At(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t}function Pt(t,n){var r=n[0],e=n[1],i=n[2],a=r*r+e*e+i*i;return 0<a&&(a=1/Math.sqrt(a)),t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t}function Ct(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Ft(t,n,r){var e=n[0],i=n[1],a=n[2],o=r[0],u=r[1],s=r[2];return t[0]=i*s-a*u,t[1]=a*o-e*s,t[2]=e*u-i*o,t}function Lt(t,n,r,e){var i=n[0],a=n[1],o=n[2];return t[0]=i+e*(r[0]-i),t[1]=a+e*(r[1]-a),t[2]=o+e*(r[2]-o),t}function Ot(t,n,r,e,i,a){var o=a*a,u=o*(2*a-3)+1,s=o*(a-2)+a,c=o*(a-1),f=o*(3-2*a);return t[0]=n[0]*u+r[0]*s+e[0]*c+i[0]*f,t[1]=n[1]*u+r[1]*s+e[1]*c+i[1]*f,t[2]=n[2]*u+r[2]*s+e[2]*c+i[2]*f,t}function It(t,n,r,e,i,a){var o=1-a,u=o*o,s=a*a,c=u*o,f=3*a*u,h=3*s*o,l=s*a;return t[0]=n[0]*c+r[0]*f+e[0]*h+i[0]*l,t[1]=n[1]*c+r[1]*f+e[1]*h+i[1]*l,t[2]=n[2]*c+r[2]*f+e[2]*h+i[2]*l,t}function Bt(t,n){n=n||1;var r=2*h()*Math.PI,e=2*h()-1,i=Math.sqrt(1-e*e)*n;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=e*n,t}function Dt(t,n,r){var e=n[0],i=n[1],a=n[2],o=r[3]*e+r[7]*i+r[11]*a+r[15];return o=o||1,t[0]=(r[0]*e+r[4]*i+r[8]*a+r[12])/o,t[1]=(r[1]*e+r[5]*i+r[9]*a+r[13])/o,t[2]=(r[2]*e+r[6]*i+r[10]*a+r[14])/o,t}function jt(t,n,r){var e=n[0],i=n[1],a=n[2];return t[0]=e*r[0]+i*r[3]+a*r[6],t[1]=e*r[1]+i*r[4]+a*r[7],t[2]=e*r[2]+i*r[5]+a*r[8],t}function zt(t,n,r){var e=r[0],i=r[1],a=r[2],o=r[3],u=n[0],s=n[1],c=n[2],f=i*c-a*s,h=a*u-e*c,l=e*s-i*u,d=i*l-a*h,v=a*f-e*l,m=e*h-i*f,y=2*o;return f*=y,h*=y,l*=y,d*=2,v*=2,m*=2,t[0]=u+f+d,t[1]=s+h+v,t[2]=c+l+m,t}function Rt(t,n,r,e){var i=[],a=[];return i[0]=n[0]-r[0],i[1]=n[1]-r[1],i[2]=n[2]-r[2],a[0]=i[0],a[1]=i[1]*Math.cos(e)-i[2]*Math.sin(e),a[2]=i[1]*Math.sin(e)+i[2]*Math.cos(e),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function Ut(t,n,r,e){var i=[],a=[];return i[0]=n[0]-r[0],i[1]=n[1]-r[1],i[2]=n[2]-r[2],a[0]=i[2]*Math.sin(e)+i[0]*Math.cos(e),a[1]=i[1],a[2]=i[2]*Math.cos(e)-i[0]*Math.sin(e),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function Vt(t,n,r,e){var i=[],a=[];return i[0]=n[0]-r[0],i[1]=n[1]-r[1],i[2]=n[2]-r[2],a[0]=i[0]*Math.cos(e)-i[1]*Math.sin(e),a[1]=i[0]*Math.sin(e)+i[1]*Math.cos(e),a[2]=i[2],t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function Nt(t,n){var r=ft(t[0],t[1],t[2]),e=ft(n[0],n[1],n[2]);Pt(r,r),Pt(e,e);var i=Ct(r,e);return 1<i?0:i<-1?Math.PI:Math.acos(i)}function qt(t){return t[0]=0,t[1]=0,t[2]=0,t}function Yt(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Gt(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}function Xt(t,n){var r=t[0],e=t[1],i=t[2],a=n[0],o=n[1],u=n[2];return Math.abs(r-a)<=I*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(e-o)<=I*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(i-u)<=I*Math.max(1,Math.abs(i),Math.abs(u))}var Ht,Kt=vt,Qt=mt,Wt=yt,Zt=kt,Jt=St,$t=ct,tn=Et,nn=(Ht=ut(),function(t,n,r,e,i,a){var o,u;for(n=n||3,r=r||0,u=e?Math.min(e*n+r,t.length):t.length,o=r;o<u;o+=n)Ht[0]=t[o],Ht[1]=t[o+1],Ht[2]=t[o+2],i(Ht,Ht,a),t[o]=Ht[0],t[o+1]=Ht[1],t[o+2]=Ht[2];return t});function rn(){var t=new g(4);return g!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function en(t){var n=new g(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function an(t,n,r,e){var i=new g(4);return i[0]=t,i[1]=n,i[2]=r,i[3]=e,i}function on(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function un(t,n,r,e,i){return t[0]=n,t[1]=r,t[2]=e,t[3]=i,t}function sn(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t}function cn(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t}function fn(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t[3]=n[3]*r[3],t}function hn(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t[3]=n[3]/r[3],t}function ln(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t}function dn(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t}function vn(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t[3]=Math.min(n[3],r[3]),t}function mn(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t[3]=Math.max(n[3],r[3]),t}function yn(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t}function gn(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t}function pn(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t}function Mn(t,n){var r=n[0]-t[0],e=n[1]-t[1],i=n[2]-t[2],a=n[3]-t[3];return Math.hypot(r,e,i,a)}function bn(t,n){var r=n[0]-t[0],e=n[1]-t[1],i=n[2]-t[2],a=n[3]-t[3];return r*r+e*e+i*i+a*a}function wn(t){var n=t[0],r=t[1],e=t[2],i=t[3];return Math.hypot(n,r,e,i)}function _n(t){var n=t[0],r=t[1],e=t[2],i=t[3];return n*n+r*r+e*e+i*i}function xn(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t}function kn(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t}function Sn(t,n){var r=n[0],e=n[1],i=n[2],a=n[3],o=r*r+e*e+i*i+a*a;return 0<o&&(o=1/Math.sqrt(o)),t[0]=r*o,t[1]=e*o,t[2]=i*o,t[3]=a*o,t}function En(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function Tn(t,n,r,e){var i=r[0]*e[1]-r[1]*e[0],a=r[0]*e[2]-r[2]*e[0],o=r[0]*e[3]-r[3]*e[0],u=r[1]*e[2]-r[2]*e[1],s=r[1]*e[3]-r[3]*e[1],c=r[2]*e[3]-r[3]*e[2],f=n[0],h=n[1],l=n[2],d=n[3];return t[0]=h*c-l*s+d*u,t[1]=-f*c+l*o-d*a,t[2]=f*s-h*o+d*i,t[3]=-f*u+h*a-l*i,t}function An(t,n,r,e){var i=n[0],a=n[1],o=n[2],u=n[3];return t[0]=i+e*(r[0]-i),t[1]=a+e*(r[1]-a),t[2]=o+e*(r[2]-o),t[3]=u+e*(r[3]-u),t}function Pn(t,n){var r,e,i,a,o,u;for(n=n||1;1<=(o=(r=2*h()-1)*r+(e=2*h()-1)*e););for(;1<=(u=(i=2*h()-1)*i+(a=2*h()-1)*a););var s=Math.sqrt((1-o)/u);return t[0]=n*r,t[1]=n*e,t[2]=n*i*s,t[3]=n*a*s,t}function Cn(t,n,r){var e=n[0],i=n[1],a=n[2],o=n[3];return t[0]=r[0]*e+r[4]*i+r[8]*a+r[12]*o,t[1]=r[1]*e+r[5]*i+r[9]*a+r[13]*o,t[2]=r[2]*e+r[6]*i+r[10]*a+r[14]*o,t[3]=r[3]*e+r[7]*i+r[11]*a+r[15]*o,t}function Fn(t,n,r){var e=n[0],i=n[1],a=n[2],o=r[0],u=r[1],s=r[2],c=r[3],f=c*e+u*a-s*i,h=c*i+s*e-o*a,l=c*a+o*i-u*e,d=-o*e-u*i-s*a;return t[0]=f*c+d*-o+h*-s-l*-u,t[1]=h*c+d*-u+l*-o-f*-s,t[2]=l*c+d*-s+f*-u-h*-o,t[3]=n[3],t}function Ln(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function On(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function In(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function Bn(t,n){var r=t[0],e=t[1],i=t[2],a=t[3],o=n[0],u=n[1],s=n[2],c=n[3];return Math.abs(r-o)<=I*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(e-u)<=I*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(i-s)<=I*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(a-c)<=I*Math.max(1,Math.abs(a),Math.abs(c))}var Dn,jn=cn,zn=fn,Rn=hn,Un=Mn,Vn=bn,Nn=wn,qn=_n,Yn=(Dn=rn(),function(t,n,r,e,i,a){var o,u;for(n=n||4,r=r||0,u=e?Math.min(e*n+r,t.length):t.length,o=r;o<u;o+=n)Dn[0]=t[o],Dn[1]=t[o+1],Dn[2]=t[o+2],Dn[3]=t[o+3],i(Dn,Dn,a),t[o]=Dn[0],t[o+1]=Dn[1],t[o+2]=Dn[2],t[o+3]=Dn[3];return t});function Gn(t){return t*Math.PI/180}function Xn(t,n){return Math.random()*(n-t)+t}function Hn(t){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?a.fromValues(parseInt(n[1],16)/255,parseInt(n[2],16)/255,parseInt(n[3],16)/255,1):null}var Kn=new Map([[0,Hn("#00FA9A")],[1,Hn("#00FF66")],[2,Hn("#00FF33")],[3,Hn("#00FF00")],[4,Hn("#00FF00")],[5,Hn("#00FA9A")],[6,Hn("#D1E231")],[7,Hn("#CDC673")],[8,Hn("#8B6914")],[9,Hn("#8B4500")],[10,Hn("#5E2605")]]);function Qn(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var Wn=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.grid=[[]]}var n,r,e;return n=t,(r=[{key:"generateMesh",value:function(){var t=this.computeVertices(),n=this.computeIndices();return this.computeNormals(t,n),this.computeTextureColors(t),new f(t,n)}},{key:"generateGrid",value:function(t,n,r,e,i){var a=3<arguments.length&&void 0!==e?e:0,o=4<arguments.length&&void 0!==i?i:40,u=(this.gridSize=t)-1;if(!(0!=((s=u)&s-1)||o<=a)){var s;this.grid=this.createGrid(0);for(var c=u;1<c;c/=2){for(var f=(o-a)*r*(c/u),h=0;h<u;h+=c)for(var l=0;l<u;l+=c){var d=this.grid[l][h],v=this.grid[l+c][h],m=this.grid[l][h+c],y=this.grid[l+c][h+c];this.grid[l+c/2][h+c/2]=(d+v+m+y)/4+Xn(-f,f)}for(var g=0;g<u;g+=c)for(var p=0;p<u;p+=c){var M=this.grid[p][g],b=this.grid[p+c][g],w=this.grid[p][g+c],_=this.grid[p+c][g+c],x=this.grid[p+c/2][g+c/2],k=g<=0?(M+b+x)/3:(M+b+x+this.grid[p+c/2][g-c/2])/4,S=p<=0?(M+x+w)/3:(M+x+w+this.grid[p-c/2][g+c/2])/4,E=u-c<=p?(b+x+_)/3:(b+x+_+this.grid[p+c+c/2][g+c/2])/4,T=u-c<=g?(x+w+_)/3:(x+w+_+this.grid[p+c/2][g+c+c/2])/4;this.grid[p+c/2][g]=k+Xn(-f,f),this.grid[p][g+c/2]=S+Xn(-f,f),this.grid[p+c][g+c/2]=E+Xn(-f,f),this.grid[p+c/2][g+c]=T+Xn(-f,f)}}}}},{key:"createGrid",value:function(t){for(var n=[],r=0;r<this.gridSize;r++){n[r]=[];for(var e=0;e<this.gridSize;e++)n[r][e]=t}return n}},{key:"computeVertices",value:function(){for(var t=[],n=0;n<this.gridSize;n++)for(var r=0;r<this.gridSize;r++)t.push(new u(p.fromValues(.25*(r-this.gridSize/2),this.grid[r][n]/2,.25*(n-this.gridSize/2)),a.create(),p.create()));return t}},{key:"computeIndices",value:function(){for(var t=[],n=0;n<this.gridSize-1;n++)for(var r=0;r<this.gridSize-1;r++){var e=r+n*this.gridSize,i=r+1+n*this.gridSize,a=r+(n+1)*this.gridSize,o=r+1+(n+1)*this.gridSize;t.push(e),t.push(o),t.push(a),t.push(e),t.push(i),t.push(o)}return t}},{key:"computeNormals",value:function(t,n){for(var r=0;r<n.length;r+=3){var e=n[r],i=n[r+1],a=n[r+2],o=t[e],u=t[i],s=t[a],c=p.subtract(p.create(),o.coordinates,u.coordinates),f=p.subtract(p.create(),o.coordinates,s.coordinates),h=p.normalize(p.create(),p.cross(p.create(),c,f));p.add(o.normal,o.normal,h),p.add(u.normal,u.normal,h),p.add(s.normal,s.normal,h)}var l=!0,d=!1,v=void 0;try{for(var m,y=t[Symbol.iterator]();!(l=(m=y.next()).done);l=!0){var g=m.value;p.normalize(g.normal,g.normal)}}catch(t){d=!0,v=t}finally{try{l||null==y.return||y.return()}finally{if(d)throw v}}}},{key:"computeTextureColors",value:function(t){var n,r,e,i,a=function(t,n){if(!t||t.length<0)return{};var r={min:t[0],max:t[0]},e=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(e=(o=u.next()).done);e=!0){var s=o.value;n(r.max,s)<0&&(r.max=s),0<n(r.min,s)&&(r.min=s)}}catch(t){i=!0,a=t}finally{try{e||null==u.return||u.return()}finally{if(i)throw a}}return r}(t,function(t,n){return t.coordinates[1]-n.coordinates[1]}),o=!0,u=!1,s=void 0;try{for(var c,f=t[Symbol.iterator]();!(o=(c=f.next()).done);o=!0){var h=c.value;h.color=(n=h.coordinates[1],r=a.min.coordinates[1],e=a.max.coordinates[1],i=void 0,Kn.get(Math.trunc((n-(i=r))/(e-i)*10)))}}catch(t){u=!0,s=t}finally{try{o||null==f.return||f.return()}finally{if(u)throw s}}}}])&&Qn(n.prototype,r),e&&Qn(n,e),t}();function Zn(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var Jn=function(){function n(t){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.gl=t,this.array=this.gl.createVertexArray()}var t,r,e;return t=n,(r=[{key:"addBuffer",value:function(t,n){t.bind();for(var r=0,e=0;e<n.elements.length;e++){var i=n.elements[e];this.gl.enableVertexAttribArray(e),this.gl.vertexAttribPointer(e,i.count,i.type,i.normalized,n.stride,r),r+=i.count*i.sizeOfType()}}},{key:"bind",value:function(){this.gl.bindVertexArray(this.array)}},{key:"unBind",value:function(){this.gl.bindVertexArray(null)}}])&&Zn(t.prototype,r),e&&Zn(t,e),n}();function $n(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var tr=function(){function n(t){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.gl=t,this.buffer=this.gl.createBuffer()}var t,r,e;return t=n,(r=[{key:"init",value:function(t){this.bind(),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(t),this.gl.STATIC_DRAW)}},{key:"bind",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer)}},{key:"unBind",value:function(){this.gl.bind(this.gl.ARRAY_BUFFER,null)}}])&&$n(t.prototype,r),e&&$n(t,e),n}();function nr(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var rr=function(){function n(t){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.gl=t,this.buffer=this.gl.createBuffer(),this._count=0}var t,r,e;return t=n,(r=[{key:"init",value:function(t){this.bind(),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,new Uint32Array(t),this.gl.STATIC_DRAW),this._count=t.length}},{key:"bind",value:function(){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.buffer)}},{key:"unBind",value:function(){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}},{key:"clear",value:function(){this.gl.deleteBuffer(this.buffer)}},{key:"count",get:function(){return this._count}}])&&nr(t.prototype,r),e&&nr(t,e),n}();function er(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var ir=function(){function i(t,n,r,e){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,i),this.gl=t,this._type=n,this._count=r,this._normalized=e}var t,n,r;return t=i,(n=[{key:"sizeOfType",value:function(){switch(this._type){case this.gl.FLOAT:return 4;case this.gl.UNSIGNED_BYTE:return 1;case this.gl.UNSIGNED_INT:return 4;default:return 0}}},{key:"type",get:function(){return this._type}},{key:"count",get:function(){return this._count}},{key:"normalized",get:function(){return this._normalized}}])&&er(t.prototype,n),r&&er(t,r),i}();function ar(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var or=function(){function n(t){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.gl=t,this._elements=[],this._stride=0}var t,r,e;return t=n,(r=[{key:"pushFloat",value:function(t){var n=new ir(this.gl,this.gl.FLOAT,t,!0);this._elements.push(n),this._stride+=n.sizeOfType()*t}},{key:"pushInt",value:function(t){var n=new ir(this.gl,this.gl.UNSIGNED_INT,t,!1);this._elements.push(n),this._stride+=n.sizeOfType()*t}},{key:"elements",get:function(){return this._elements}},{key:"stride",get:function(){return this._stride}}])&&ar(t.prototype,r),e&&ar(t,e),n}();function ur(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var sr=function(){function r(t,n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,r),this.specularIntensity=t,this.shininess=n}var t,n,e;return t=r,(n=[{key:"useMaterial",value:function(t){t.setUniform1f("u_Material.specularIntensity",this.specularIntensity),t.setUniform1f("u_Material.shininess",this.shininess)}}])&&ur(t.prototype,n),e&&ur(t,e),r}();function cr(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var fr=function(){function e(t,n,r){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.gl=t,this.vertexArray=new Jn(t),this.vertexArray.bind(),this.vertexBuffer=new tr(t),this.vertexBuffer.init(n.vertexData),this.indexBuffer=new rr(t),this.indexBuffer.init(n.indexData),this.vertexBufferLayout=new or(t),this.vertexBufferLayout.pushFloat(3),this.vertexBufferLayout.pushFloat(4),this.vertexBufferLayout.pushFloat(3),this.vertexArray.addBuffer(this.vertexBuffer,this.vertexBufferLayout),this._modelMatrix=i.create(),this._rotationAngle=r,this._rotationSpeed=.05,this._material=new sr(.5,32),this.applyRotation()}var t,n,r;return t=e,(n=[{key:"bind",value:function(){this.vertexArray.bind(),this.indexBuffer.bind()}},{key:"rotate",value:function(t){this._rotationAngle+=t*this._rotationSpeed,Math.abs(this._rotationAngle)>2*Math.PI&&(this._rotationAngle=0),this.applyRotation()}},{key:"applyRotation",value:function(){i.rotate(this._modelMatrix,i.identity(i.create()),this._rotationAngle,p.fromValues(0,1,0))}},{key:"material",get:function(){return this._material}},{key:"modelMatrix",get:function(){return this._modelMatrix}},{key:"numberOfVertices",get:function(){return this.indexBuffer.count}}])&&cr(t.prototype,n),r&&cr(t,r),e}();function hr(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var lr=function(){function e(t,n,r){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.gl=t,this.source=n,this.shaderType=r}var t,n,r;return t=e,(n=[{key:"compile",value:function(){this.shaderObject=this.gl.createShader(this.shaderType),this.gl.shaderSource(this.shaderObject,this.source),this.gl.compileShader(this.shaderObject);this.gl.getShaderParameter(this.shaderObject,this.gl.COMPILE_STATUS)}},{key:"getShaderObject",value:function(){return this.shaderObject}}])&&hr(t.prototype,n),r&&hr(t,r),e}();function dr(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var vr=function(){function e(t,n,r){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.gl=t,this.shaders=[n,r],this.uniformLocationCache={}}var t,n,r;return t=e,(n=[{key:"attachShaders",value:function(){this.program=this.gl.createProgram();var t=!0,n=!1,r=void 0;try{for(var e,i=this.shaders[Symbol.iterator]();!(t=(e=i.next()).done);t=!0){var a=e.value;this.gl.attachShader(this.program,a.getShaderObject())}}catch(t){n=!0,r=t}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}this.gl.linkProgram(this.program);this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)}},{key:"bind",value:function(){this.gl.useProgram(this.program)}},{key:"getUniformLocation",value:function(t){if(this.uniformLocationCache[t])return this.uniformLocationCache[t];var n=this.gl.getUniformLocation(this.program,t);return n&&(this.uniformLocationCache[t]=n),n}},{key:"setUniform1f",value:function(t,n){var r=this.getUniformLocation(t);this.gl.uniform1f(r,n)}},{key:"setUniform3f",value:function(t,n){var r=this.getUniformLocation(t);this.gl.uniform3f(r,n[0],n[1],n[2])}},{key:"setUniformMat4f",value:function(t,n){var r=this.getUniformLocation(t);this.gl.uniformMatrix4fv(r,!1,n)}}])&&dr(t.prototype,n),r&&dr(t,r),e}();function mr(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var yr=function(){function i(t,n,r,e){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,i),this.color=t,this.ambientIntensity=n,this.direction=r,this.diffuseIntensity=e}var t,n,r;return t=i,(n=[{key:"useLight",value:function(t){t.setUniform3f("u_DirectionalLight.color",this.color),t.setUniform1f("u_DirectionalLight.ambientIntensity",this.ambientIntensity),t.setUniform3f("u_DirectionalLight.direction",this.direction),t.setUniform1f("u_DirectionalLight.diffuseIntensity",this.diffuseIntensity)}}])&&mr(t.prototype,n),r&&mr(t,r),i}();function gr(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var pr=function(){function n(t){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.gl=t}var t,r,e;return t=n,(r=[{key:"clear",value:function(){this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},{key:"draw",value:function(t,n){n.bind(),t.bind(),this.gl.enable(this.gl.DEPTH_TEST),this.gl.depthFunc(this.gl.LEQUAL),this.gl.drawElements(this.gl.TRIANGLES,t.numberOfVertices,this.gl.UNSIGNED_INT,0)}}])&&gr(t.prototype,r),e&&gr(t,e),n}();function Mr(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var br=function(){function o(t,n,r,e,i,a){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,o),this.gl=t,this.position=n,this.up=r,this.worldUp=e,this.yaw=i,this.pitch=a,this.front=p.fromValues(0,0,-1),this.right=p.fromValues(1,0,0),this.turnSpeed=.1,this.movementSpeed=1e-4,this.update()}var t,n,r;return t=o,(n=[{key:"update",value:function(){this.front[0]=Math.cos(Gn(this.yaw))*Math.cos(Gn(this.pitch)),this.front[1]=Math.sin(Gn(this.pitch)),this.front[2]=Math.sin(Gn(this.yaw))*Math.cos(Gn(this.pitch)),p.normalize(this.right,p.cross(p.create(),this.front,this.worldUp)),p.normalize(this.up,p.cross(p.create(),this.right,this.front))}},{key:"moveForward",value:function(t){p.add(this.position,this.position,p.fromValues(this.front[0]*this.movementSpeed*t,this.front[1]*this.movementSpeed*t,this.front[2]*this.movementSpeed*t))}},{key:"moveBackward",value:function(t){p.subtract(this.position,this.position,p.fromValues(this.front[0]*this.movementSpeed*t,this.front[1]*this.movementSpeed*t,this.front[2]*this.movementSpeed*t))}},{key:"moveLeft",value:function(t){p.subtract(this.position,this.position,p.fromValues(this.right[0]*this.movementSpeed*t,this.right[1]*this.movementSpeed*t,this.right[2]*this.movementSpeed*t))}},{key:"moveRight",value:function(t){p.add(this.position,this.position,p.fromValues(this.right[0]*this.movementSpeed*t,this.right[1]*this.movementSpeed*t,this.right[2]*this.movementSpeed*t))}},{key:"turn",value:function(t,n){var r=t*this.turnSpeed,e=n*this.turnSpeed;this.yaw+=r,this.pitch+=e,89<this.pitch&&(this.pitch=89),this.pitch<-89&&(this.pitch=-89),this.update()}},{key:"calculateViewMatrix",value:function(){return i.lookAt(i.create(),this.position,p.add(p.create(),this.position,this.front),this.up)}}])&&Mr(t.prototype,n),r&&Mr(t,r),o}();function wr(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var _r=function(){function i(t,n,r){var e=this;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,i),t.setAttribute("tabindex","0"),t.focus(),t&&(t.addEventListener("mousedown",function(t){e.onMouseDown(t)},!1),t.addEventListener("mouseup",function(t){e.onMouseUp(t)},!1),t.addEventListener("mousemove",function(t){e.onMouseMove(t)},!1),t.addEventListener("wheel",function(t){e.onMouseScroll(t)},!1),t.addEventListener("keypress",function(t){e.onKeyDow(t)},!1),t.addEventListener("keyup",function(t){e.onKeyUp(t)},!1)),this.camera=n,this.terrain=r,this.lastX=0,this.lastY=0,this.xChange=0,this.yChange=0,this.mouseFirstMoved=!0,this.mouseButtonPressed=Array(16).fill(!1),this.keyPressed=Array(1024).fill(!1),this._deltaTime=0}var t,n,r;return t=i,(n=[{key:"onMouseDown",value:function(t){this.mouseButtonPressed[t.button]=!0}},{key:"onMouseUp",value:function(t){this.mouseButtonPressed[t.button]=!1}},{key:"onMouseMove",value:function(t){this.mouseFirstMoved?(this.lastX=t.x,this.lastY=t.y,this.mouseFirstMoved=!1):(this.xChange=t.x-this.lastX,this.yChange=t.y-this.lastY,this.lastX=t.x,this.lastY=t.y,this.mouseButtonPressed[0]&&this.camera.turn(-this.xChange,this.yChange))}},{key:"onMouseScroll",value:function(t){0<t.deltaY?this.camera.moveForward(this._deltaTime):t.deltaY<0&&this.camera.moveBackward(this._deltaTime)}},{key:"onKeyDow",value:function(t){65!=t.keyCode&&97!=t.keyCode||this.terrain.rotate(-1),68!=t.keyCode&&100!=t.keyCode||this.terrain.rotate(1)}},{key:"onKeyUp",value:function(t){this.keyPressed[t.keyCode]=!1}},{key:"deltaTime",set:function(t){this._deltaTime=t}}])&&wr(t.prototype,n),r&&wr(t,r),i}(),xr=r(0),kr=r.n(xr),Sr=r(1),Er=r.n(Sr);function Tr(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var Ar,Pr=function(){function r(t,n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,r),this.gl=t,this.canvas=n,this.gridSize=7,this.seed=25,this.roughness=5}var t,n,e;return t=r,(n=[{key:"initialize",value:function(){this.resize(),this.perspective=i.perspective(i.create(),70,this.canvas.width/this.canvas.height,.1,100),this.renderer=new pr(this.gl),this.camera=new br(this.gl,p.fromValues(0,25,45),p.fromValues(0,1,0),p.fromValues(0,1,0),-90,-35),this.directionalLight=new yr(p.fromValues(1,1,1),.6,p.fromValues(1,-2,-2),.5),this.fractal=new Wn,this.fractal.generateGrid(Math.pow(2,this.gridSize)+1,this.seed,this.roughness/5),this.loadTerrain(),this.initShaderProgram()}},{key:"loadTerrain",value:function(){var t=this.fractal.generateMesh(),n=this.terrain?this.terrain.rotationAngle:0;this.terrain=new fr(this.gl,t,n),this.controls=new _r(this.canvas,this.camera,this.terrain)}},{key:"initShaderProgram",value:function(){var t=new lr(this.gl,kr.a,this.gl.VERTEX_SHADER);t.compile();var n=new lr(this.gl,Er.a,this.gl.FRAGMENT_SHADER);n.compile(),this.shaderProgram=new vr(this.gl,t,n),this.shaderProgram.attachShaders(),this.shaderProgram.bind()}},{key:"update",value:function(t){this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.controls.deltaTime=t,this.directionalLight.useLight(this.shaderProgram),this.terrain.material.useMaterial(this.shaderProgram),this.renderer.clear(),this.shaderProgram.setUniformMat4f("u_Model",this.terrain.modelMatrix),this.shaderProgram.setUniformMat4f("u_View",this.camera.calculateViewMatrix()),this.shaderProgram.setUniformMat4f("u_Projection",this.perspective),this.shaderProgram.setUniform3f("u_EyePosition",this.camera.position),this.renderer.draw(this.terrain,this.shaderProgram)}},{key:"resize",value:function(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}}])&&Tr(t.prototype,n),e&&Tr(t,e),r}();Ar=function(){var t=document.getElementById("gl-surface"),n=t.getContext("webgl2"),r=new Pr(n,t);r.initialize();requestAnimationFrame(function t(n){r.update(n),requestAnimationFrame(t)})},"loading"!==document.readyState?Ar():document.addEventListener("DOMContentLoaded",Ar)}]);